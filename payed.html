<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Complete!!!!</title>
    <link rel="stylesheet" href="./css/payed.css">
</head>
<body>
    <header class = "header">
        <nav class="header__nav">
            <img src="./img/logo.png" alt="">
            <p class="header-desc" id="header-title"></p>
            <div class="header__nav_me">
                <a id="bin_point" href="index.html"><img src="./img/main.png" alt=""></a>
                <a id="profile_point"><img src="./img/Profile.png" alt=""></a>
                <button style="display: none;" id="exit_btn"></button>
            </div>
        </nav>
    </header>
    <div class="main">
        <h2 class="header-title">Ураа! Вы купили все что надо!</h2>
        <p class="desc">Можете уходить.</p>
    </div>
    <script>
        let logged
        if (JSON.parse(localStorage.getItem("logged")) == true){
            logged = true
            userNowId = JSON.parse(localStorage.getItem("lastUserLogged"))
        }
        else if(localStorage.getItem("logged") == null){
            logged = false
        }
        const hello = document.getElementById("header-title")
        if (logged == true) {
            userName = JSON.parse(localStorage.getItem("lastUserLogged"))[1]
            hello.textContent = `САЛАМАЛЕЙКУМ ${userName}`    
        }
        else{
            hello.textContent = `ЗАРЕГАЙСЯ ПЖ` 
        }
        localStorage.removeItem("binStorage")
        const profile = document.getElementById("profile_point")
        const exitBtn = document.getElementById("exit_btn")
        profile.addEventListener("click", (e)=>{
            if (logged) {
                e.stopPropagation() // Я не знаю как работает, но без этого не работает
                exitBtn.style.display = "block"
                profile.style.display = "none"
                exitBtn.style.display = "block"
                exitBtn.style.background = "red"
                exitBtn.style.color = "white"
                exitBtn.style.fontSize = "12px"
                exitBtn.innerText = "Выйти???"
                exiting = true        
            }
            else{
                window.location.href = "login.html"
            }

        })

        exitBtn.addEventListener("click", ()=>{
            window.location.href = "login.html"
            
        })
        document.addEventListener("click", (e) => {
            console.log(e)
            if (e.target !== exitBtn) {
                exitBtn.style.display = "none"
                profile.style.display ="block"
                exiting = false
            }
        }) 
    </script>
</body>
</html>